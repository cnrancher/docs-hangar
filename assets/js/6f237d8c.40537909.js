"use strict";(self.webpackChunkhangar_docs=self.webpackChunkhangar_docs||[]).push([[2690],{2752:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>c,toc:()=>d});var r=i(5893),s=i(1151);const o={title:"Q&A"},a=void 0,c={id:"questions",title:"Q&A",description:"About Hangar",source:"@site/docs/99-questions.md",sourceDirName:".",slug:"/questions",permalink:"/docs/next/questions",draft:!1,unlisted:!1,editUrl:"https://github.com/cnrancher/docs-hangar/edit/main/docs/99-questions.md",tags:[],version:"current",lastUpdatedAt:1700716418,formattedLastUpdatedAt:"Nov 23, 2023",sidebarPosition:99,frontMatter:{title:"Q&A"},sidebar:"tutorialSidebar",previous:{title:"Hangar docker image",permalink:"/docs/next/docker-image"}},t={},d=[{value:"About Hangar",id:"about-hangar",level:2},{value:"Hangar cache directory",id:"hangar-cache-directory",level:2},{value:"Harbor 2.X registry",id:"harbor-2x-registry",level:2},{value:"Why using <code>zip</code> archive format?",id:"why-using-zip-archive-format",level:2},{value:"Common Errors and Solutions",id:"common-errors-and-solutions",level:2}];function l(e){const n={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"about-hangar",children:"About Hangar"}),"\n",(0,r.jsx)(n.p,{children:"Dependencies:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Hangar uses ",(0,r.jsx)(n.a,{href:"https://github.com/containers/image",children:"comtainers/images"})," dependecy to perform image copy operations."]}),"\n",(0,r.jsxs)(n.p,{children:["Since the ",(0,r.jsx)(n.a,{href:"https://github.com/containers/signature",children:"containers/signature"})," API uses C libraries, so CGO was enabled when building hangar binary, and the built binary file has dynamic link libraries."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Hangar uses ",(0,r.jsx)(n.a,{href:"https://github.com/helm/helm",children:"helm"})," dependencies to generate image list from helm chart."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"hangar-cache-directory",children:"Hangar cache directory"}),"\n",(0,r.jsxs)(n.p,{children:["Hangar uses ",(0,r.jsx)(n.code,{children:"${HOME}/.cache/hangar_cache"})," to store temporary image blob files."]}),"\n",(0,r.jsxs)(n.p,{children:["You need to delete ",(0,r.jsx)(n.code,{children:"${HOME}/.cache/hangar_cache"})," directory manually if you force killed hangar when copying images."]}),"\n",(0,r.jsx)(n.h2,{id:"harbor-2x-registry",children:"Harbor 2.X registry"}),"\n",(0,r.jsxs)(n.p,{children:["Hangar will try to create ",(0,r.jsx)(n.strong,{children:"Harbor Project"})," automatically for ",(0,r.jsx)(n.a,{href:"load/load",children:"load"})," command if the destination registry is harbor."]}),"\n",(0,r.jsxs)(n.p,{children:["You need to create ",(0,r.jsx)(n.strong,{children:"Harbor Project"})," manually if Hangar can't create the project automatically, or the image will fail to copy."]}),"\n",(0,r.jsxs)(n.h2,{id:"why-using-zip-archive-format",children:["Why using ",(0,r.jsx)(n.code,{children:"zip"})," archive format?"]}),"\n",(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.a,{href:"save/archive",children:"archive"})," page."]}),"\n",(0,r.jsx)(n.h2,{id:"common-errors-and-solutions",children:"Common Errors and Solutions"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Since hangar uses the ",(0,r.jsx)(n.code,{children:"zip"})," format archive file after version ",(0,r.jsx)(n.code,{children:"v1.7.0"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["The archive file created by older versions of hangar (",(0,r.jsx)(n.code,{children:"tar.gz"}),") are no longer compatible with new versions (",(0,r.jsx)(n.code,{children:"zip"}),")."]}),"\n",(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.a,{href:"save/archive",children:"hangar archive"})," for more information of the new archive format."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Error: ",(0,r.jsx)(n.code,{children:"manifest unknown"})]}),"\n",(0,r.jsxs)(n.p,{children:["The image to be copy does not exists. you can use ",(0,r.jsx)(n.code,{children:"hangar inspect --raw docker://<IMAGE>"})," to check whether the image exists or not."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Error: ",(0,r.jsx)(n.code,{children:"unsupported MIME type"})]}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"mediaType"})," of the image manifest is not supported."]}),"\n",(0,r.jsxs)(n.p,{children:["Hangar supports following types of ",(0,r.jsx)(n.code,{children:"mediaType"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"application/vnd.docker.distribution.manifest.list.v2+json"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"application/vnd.docker.distribution.manifest.v2+json"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"application/vnd.docker.distribution.manifest.v1+json"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"application/vnd.oci.image.manifest.v1+json"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"application/vnd.oci.image.index.v1+json"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Error: ",(0,r.jsx)(n.code,{children:"open /etc/containers/policy.json: no such file or directory"})]}),"\n",(0,r.jsxs)(n.p,{children:["The policy config file ",(0,r.jsx)(n.code,{children:"/etc/containers/policy.json"})," does not exists, you can obtain a default policy file at ",(0,r.jsx)(n.a,{href:"https://github.com/cnrancher/hangar/blob/main/default-policy.json",children:"default-policy.json"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Or you can execute hangar with ",(0,r.jsx)(n.code,{children:"--insecure-policy"})," option."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Warning: ",(0,r.jsx)(n.code,{children:"no avaiable image for specified arch and os"})]}),"\n",(0,r.jsxs)(n.p,{children:["The architecture / OS of the image to be copied does not match the architecture & OS specified by the ",(0,r.jsx)(n.code,{children:"--arch"})," and ",(0,r.jsx)(n.code,{children:"--os"})," parameter."]}),"\n",(0,r.jsxs)(n.p,{children:["Example\uff1athe image to be copied only contains ",(0,r.jsx)(n.code,{children:"amd64"})," architecture, but ",(0,r.jsx)(n.code,{children:"--arch"})," option of hangar is ",(0,r.jsx)(n.code,{children:"arm64"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"This warning message will not affect the image copy process. When this warning message shows, it is only used to inform that this container image has not been copied."}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},1151:(e,n,i)=>{i.d(n,{Z:()=>c,a:()=>a});var r=i(7294);const s={},o=r.createContext(s);function a(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);